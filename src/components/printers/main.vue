<template>
  <div>


    <div class="invoice-logo" >
      <svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="124.000000pt" height="121.000000pt" viewBox="0 0 124.000000 121.000000" preserveAspectRatio="xMidYMid meet">
        <g transform="translate(0.000000,121.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
        <path d="M528 1175 c-89 -17 -188 -52 -255 -92 -79 -46 -179 -151 -213 -225 -37 -78 -63 -198 -57 -255 8 -74 47 -96 47 -27 0 61 30 187 58 244 38 77 132 170 212 208 100 48 137 49 41 1 -137 -70 -236 -186 -266 -311 -17 -73 -20 -221 -5 -298 15 -81 47 -134 124 -208 75 -72 152 -117 239 -138 50 -12 50 -12 16 -13 -52 -1 -157 33 -211 69 -44 29 -110 94 -156 155 l-23 30 18 -33 c28 -52 134 -153 204 -195 120 -71 241 -94 354 -67 28 7 93 33 145 57 141 68 234 172 292 329 20 51 23 78 22 194 -1 151 -19 224 -75 307 -56 80 -213 183 -281 183 -34 0 -58 9 -58 22 0 18 101 -1 165 -31 68 -33 151 -92 187 -136 122 -146 144 -429 48 -632 -34 -74 -126 -175 -207 -229 -30 -20 -52 -38 -49 -41 8 -8 119 56 173 100 98 81 162 178 199 303 25 84 25 250 0 324 -61 179 -172 306 -336 384 -58 27 -76 31 -170 33 -60 1 -138 -4 -182 -12z m257 -370 c50 -23 99 -50 110 -59 11 -9 -25 5 -80 32 -170 81 -172 83 -145 76 14 -3 66 -25 115 -49z m-325 -2 c-52 -24 -110 -54 -127 -65 -53 -32 -38 -13 17 22 50 32 177 90 195 89 6 0 -33 -21 -85 -46z m27 -176 c46 -142 49 -157 25 -157 -14 0 -21 9 -25 30 -6 27 -10 30 -46 30 -36 0 -40 -3 -46 -30 -5 -21 -13 -30 -26 -30 -10 0 -19 4 -19 9 0 13 67 228 75 241 15 24 31 0 62 -93z m87 86 c2 -10 13 -57 22 -105 10 -49 21 -88 24 -88 4 0 17 45 30 101 21 89 39 123 56 106 3 -3 -11 -77 -30 -164 -20 -88 -36 -163 -36 -166 0 -4 -8 -7 -18 -7 -15 0 -24 27 -55 163 -20 89 -37 165 -37 170 0 15 39 6 44 -10z m250 11 c36 -5 46 -11 46 -25 0 -16 -8 -19 -45 -19 -43 0 -45 -1 -45 -30 0 -28 2 -30 40 -30 33 0 40 -3 40 -20 0 -17 -7 -20 -40 -20 -39 0 -40 -1 -40 -35 l0 -35 50 0 c43 0 50 -3 50 -20 0 -18 -7 -20 -70 -20 l-70 0 0 130 c0 146 -7 136 84 124z m-514 -139 c0 -108 -1 -115 -20 -115 -17 0 -20 7 -20 51 0 43 -3 50 -16 45 -9 -3 -27 -6 -40 -6 -22 0 -24 -4 -24 -45 0 -33 -4 -45 -15 -45 -12 0 -15 18 -15 99 0 79 3 100 15 105 12 4 15 -3 15 -35 l0 -40 38 3 c37 3 37 3 40 51 3 39 6 47 23 47 18 0 19 -8 19 -115z m697 30 l42 -80 1 72 c0 66 1 71 20 66 18 -5 20 -14 20 -104 0 -96 -1 -99 -22 -99 -18 0 -31 16 -63 77 l-40 76 -3 -77 c-3 -68 -5 -76 -22 -76 -19 0 -20 7 -20 116 0 114 0 115 23 112 16 -2 33 -24 64 -83z m-489 -192 c-38 -2 -98 -2 -135 0 -38 2 -7 3 67 3 74 0 105 -1 68 -3z m345 0 c-34 -2 -93 -2 -130 0 -37 2 -9 3 62 3 72 0 102 -1 68 -3z m-382 -60 c-8 -3 -9 -8 -3 -12 6 -4 5 -11 -4 -19 -12 -11 -14 -9 -14 13 0 17 5 25 18 24 12 0 13 -2 3 -6z m49 -17 c0 -8 -9 -16 -20 -19 -11 -3 -18 -2 -17 1 2 4 7 15 10 25 7 20 27 14 27 -7z m27 4 c1 -11 -1 -22 -5 -24 -4 -2 -8 7 -8 20 -1 13 1 24 5 24 4 0 7 -9 8 -20z m123 9 c0 -5 10 -4 21 3 18 11 23 11 27 -1 3 -10 6 -11 12 -1 10 17 40 5 40 -15 0 -19 -32 -33 -38 -16 -3 9 -7 9 -18 0 -10 -8 -18 -8 -27 0 -10 7 -17 7 -24 0 -14 -14 -33 -3 -33 17 0 8 -4 14 -10 14 -5 0 -9 -5 -7 -11 1 -6 -4 -14 -10 -16 -7 -3 -13 3 -14 14 -1 13 -3 11 -8 -7 l-7 -25 -6 27 c-5 28 -5 28 48 27 30 -1 54 -6 54 -10z"/>
        <path d="M426 618 c-10 -38 -7 -48 14 -48 11 0 20 6 20 13 0 23 -12 57 -20 57 -4 0 -10 -10 -14 -22z"/>
        <path d="M650 350 c0 -5 5 -10 10 -10 6 0 10 5 10 10 0 6 -4 10 -10 10 -5 0 -10 -4 -10 -10z"/>
        <path d="M700 350 c0 -5 5 -10 10 -10 6 0 10 5 10 10 0 6 -4 10 -10 10 -5 0 -10 -4 -10 -10z"/>
        <path d="M750 344 c0 -8 5 -12 10 -9 6 3 10 10 10 16 0 5 -4 9 -10 9 -5 0 -10 -7 -10 -16z"/>
        <path d="M20 461 c0 -27 37 -111 49 -111 10 0 3 71 -10 108 -10 27 -39 29 -39 3z"/>
        </g>
      </svg>
    </div>
    
    <h6
      class="text-center"
      style="margin: 0;font-size: 10px;padding: 0;font-weight: 500;"
      v-if="inVoiceDetails && inVoiceDetails.branch"
    >
      <b>
        {{ inVoiceDetails.branch.name }}
      </b>
    </h6>
    <!-- <h6 class="text-center mt-2 mb-2">haVen</h6> -->

    <div>
      <table class="custom-table" >
        <tr v-if="inVoiceDetails">
          <td width="35%">رقم الطلب</td>
          <td>
            <b>{{ inVoiceDetails.order }}</b>
            <!-- <b>2</b> -->
          </td>


          <td v-if="inVoiceDetails && inVoiceDetails.order_type" width="35%">نوع الطلب</td>
          <td v-if="inVoiceDetails && inVoiceDetails.order_type">
            <b>{{ inVoiceDetails.order_type.name }}</b>
          </td>


        </tr>


         <tr v-if="inVoiceDetails.created_at">
          <td colspan="2" width="35%">ميعاد الطلب</td>
          <td colspan="2">
            <b>{{ new Date(inVoiceDetails.created_at).toLocaleString("ar-EG") }}</b>
          </td>
        </tr>

        <tr>
          <td colspan="2" width="35%">ميعاد الإستلام</td>
          <td colspan="2">{{ new Date(inVoiceDetails.preparated_at).toLocaleString("ar-EG") }}</td>
        </tr>


        








        
        <tr v-if="inVoiceDetails &&
            inVoiceDetails.customer && inVoiceDetails.customer.id > 0">
          <td colspan="2" width="35%">العميل</td>
          <td colspan="2">{{ inVoiceDetails.customer.name }}</td>
        </tr>

        <tr v-else>
          <td colspan="2" width="35%">العميل</td>
          <td colspan="2" >نقدي</td>
        </tr>


        <tr v-if="inVoiceDetails && inVoiceDetails.customer && inVoiceDetails.customer.mobile && inVoiceDetails.customer.id != 1 && inVoiceDetails.customer.mobile != 0">
          <td colspan="2">الهاتف</td>
          <td colspan="2">
            {{ inVoiceDetails.customer.mobile }}
          </td>
        </tr>
        <tr v-if="inVoiceDetails && inVoiceDetails.customer && inVoiceDetails.customer.id != 1 && inVoiceDetails.customer.phone">
          <td colspan="2">رقم التليفون</td>
          <td colspan="2">
            {{ inVoiceDetails.customer.phone }}
          </td>
        </tr>

        <tr v-if="inVoiceDetails && inVoiceDetails.address && inVoiceDetails.customer.id != 1">
          <td colspan="2" width="35%">العنوان</td>
          <td colspan="2" >{{ inVoiceDetails.address }}</td>
        </tr>

        <tr v-if="inVoiceDetails && inVoiceDetails.user">
          <td colspan="2" width="35%">الكاشير</td>
          <td colspan="2" >{{ inVoiceDetails.user.name }}</td>
        </tr>


        <template
        v-if="
          inVoiceDetails &&
            inVoiceDetails.employee &&
            inVoiceDetails.order_type &&
            inVoiceDetails.order_type.id != 1 &&
            inVoiceDetails.order_type.id != 3
        "
      >


        
        
        
       
        


        <tr v-if="inVoiceDetails.employee && inVoiceDetails.employee.id > 1">
          <td colspan="2" width="35%">السائق</td>
          <td colspan="2" >{{ inVoiceDetails.employee.name }}</td>
        </tr>

        

        <tr></tr>
      </template>

      </table>

      <div style="height: 5px;"></div>

      <table class="custom-table" >
        <thead>
          <tr>
            <td>الكمية</td>
            <td>الصنف</td>
            <td>م</td>
            <td>السعر</td>
            <td>القيمة</td>
          </tr>
        </thead>

        <tbody v-if="isKitchenPrinters">
          <tr v-for="(x, index) in dataForPrint" :key="index">
            <td>{{ x.pivot ? x.pivot.qty : x.qty }}</td>
            <td>{{ x.name }}</td>
            <td>{{ x.pivot ? x.pivot.size : x.size }}</td>
            <td>{{ x.pivot ? x.pivot.price : x.price }}</td>
            <td>
              {{
                calcTotal(
                  x.pivot ? x.pivot.qty : x.qty,
                  x.pivot ? x.pivot.price : x.price
                )
              }}
            </td>
          </tr>
        </tbody>

        <tbody v-else>
          <tr v-for="(x, index) in dataForPrint" :key="index">
            <td>{{ x.pivot ? x.pivot.qty : x.qty }}</td>
            <td>{{ x.name }}</td>
            <td>{{ x.pivot ? x.pivot.size : x.size }}</td>
            <td>{{ x.pivot ? x.pivot.price : x.price }}</td>

            <td>
              {{
                calcTotal(
                  x.pivot ? x.pivot.qty : x.qty,
                  x.pivot ? x.pivot.price : x.price
                )
              }}
            </td>
          </tr>
        </tbody>
        <!-- <tfoot>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tfoot> -->
      </table>

      <div style="height: 10px;"></div>

     

      <table class="custom-table">


        <tr
          v-if="
            inVoiceDetails &&
              (inVoiceDetails.driver_cost > 0 ||
                inVoiceDetails.restaurant_cost > 0)
          "
        >
          <td style="width: 180px;background:#f7f7f7;    font-weight: bold;">
            الإجمالي
          </td>
          <td> 
            {{inVoiceDetails.total}}
            ج.م
          </td>
        </tr>


        <tr
          v-if="
            inVoiceDetails &&
              (inVoiceDetails.driver_cost > 0 ||
                inVoiceDetails.restaurant_cost > 0)
          "
        >
          <td style="width: 180px;background:#f7f7f7;    font-weight: bold;">
            سعر التوصيل
          </td>
          <td >
            {{
              (inVoiceDetails.driver_cost
                ? Number(inVoiceDetails.driver_cost)
                : 0) +
                (inVoiceDetails.restaurant_cost
                  ? Number(inVoiceDetails.restaurant_cost)
                  : 0)
            }}
            ج.م
          </td>
        </tr>

        <tr>
          <td style="background:#f7f7f7;    font-weight: bold;">
            إجمالي الفاتورة
          </td>
          <td style="width: 100px;" v-if="inVoiceDetails && inVoiceDetails.total">
            <b>{{
              Number(inVoiceDetails.total) +
                (inVoiceDetails.driver_cost
                  ? Number(inVoiceDetails.driver_cost)
                  : 0) +
                (inVoiceDetails.restaurant_cost
                  ? Number(inVoiceDetails.restaurant_cost)
                  : 0)
            }}</b>
            ج.م
          </td>
          <td v-else >
            <b>{{ allOrderPrice }}</b> ج.م
          </td>
        </tr>
      </table>

      <div style="height: 5px;"></div>


      <table class="custom-table"  v-if="inVoiceDetails.notes">
          <tr>
            <td colspan="2" width="35%">ملاحظات</td>
          </tr>
          <td colspan="2">
              <b>{{ inVoiceDetails.notes }}</b>
          </td>
      </table>

      <div
        class="d-flex justify-content-center pt-1 shared-value"
      >
        <h6><b>الاسعار شاملة ضريبة القيمة المضافة</b></h6>
        
      </div>


      <div
        class="d-flex justify-content-center p-1 phone"
        style=""
      >
        <h6 class="head"><b>للتوصيل</b></h6>
        <h6 class="value" v-if="inVoiceDetails && inVoiceDetails.branch && inVoiceDetails.branch.phone">
           {{ inVoiceDetails.branch.phone }} <i class="fas fa-phone-alt"></i>
        </h6>
      </div>

      <h6
      v-if="inVoiceDetails && inVoiceDetails.branch"
      class="address"
       
      >
        {{ inVoiceDetails.branch.address }}
      </h6>

      


     
    </div>
  </div>
</template>

<script>
export default {
    props:['isKitchenPrinters', 'dataForPrint', 'inVoiceDetails', 'allOrderPrice'],
    methods:{
        calcTotal(qty, price){
            return Number(qty)*Number(price);
        },
    }
};
</script>

<style scoped lang="scss">
.invoice-logo{
  text-align: center;
  svg{
    width: 70px;
    height: 70px;
  }
}
.custom-table{
      border: none !important;
    /* border-bottom: 1px solid #000 !important; */
    text-align: center;
    font-size: 10px;
    font-family: "CairoBold";
    line-height: 1.3 !important;
    td{
      border: none !important;
      border-bottom: 1px solid #000 !important;
      text-align: center;
          font-size: 10px;
    font-family: "CairoBold";
    }
}

.shared-value{
  border-bottom: 1px solid #000;
  margin: 0 ;
  h6{
    margin:0 10px;
    margin-bottom:0;
    font-size:10px;
    padding: 0;
    font-family: "CairoBold";
  }
}
.phone{
    padding: 0;
    border-bottom: 1px solid #000;
    margin: 0;
    .head{
      margin:0 5px;margin-bottom:0;font-size:10px;font-family: "CairoBold";
    }
    .value{
      margin:0;font-size:10px;font-family: "CairoBold"
    }
}
h6.address{
  font-family: "CairoBold";
    text-align: center;
    padding: 0;
    font-weight: 500;
    background: #f7f7f7;
    margin-top: 0;
    font-weight: bold;
    font-size: 10px;
}
</style>
